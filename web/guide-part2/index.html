<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>MapsIndoors for Web - Part 2 - MapsIndoors Developers</title>
    <meta name="generator" content="Hugo 0.26" />

    
    <meta name="description" content="Everything you need to get started with MapsIndoors.">
    
    <link rel="canonical" href="https://mapsindoors.github.io/web/guide-part2/">
    
    <meta name="author" content="MapsPeople">
    

    <meta property="og:url" content="https://mapsindoors.github.io/web/guide-part2/">
    <meta property="og:title" content="MapsIndoors Developers">
    <meta property="og:image" content="https://mapsindoors.github.io/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="MapsIndoors Developers">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://mapsindoors.github.io/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://mapsindoors.github.io/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://mapsindoors.github.io/fonts/icon.eot');
        src: url('https://mapsindoors.github.io/fonts/icon.eot')
               format('embedded-opentype'),
             url('https://mapsindoors.github.io/fonts/icon.woff')
               format('woff'),
             url('https://mapsindoors.github.io/fonts/icon.ttf')
               format('truetype'),
             url('https://mapsindoors.github.io/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://mapsindoors.github.io/stylesheets/application.css">
    <link rel="stylesheet" href="https://mapsindoors.github.io/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://mapsindoors.github.io/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://mapsindoors.github.io/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,700|Roboto&#43;Mono">
    <style>
      body, input {
        font-family: 'Roboto', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Roboto Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <link rel="stylesheet" href="https://mapsindoors.github.io/style.css">
    
    <script src="https://mapsindoors.github.io/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-light-blue palette-accent-orange">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
    
  <div class="bar default">
      
      
      <div class="button button-back" role="button" aria-label="Back">
        <a href="../" title="Back" class="toggle-button icon icon-back"></a>
      </div>
      
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        MapsIndoors for Web - Part 2
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/MapsIndoors" title="@MapsIndoors on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">

  
  
    
    
    
  
    
    
    
  
    
    
    
    <a href="https://mapsindoors.github.io/web" class="project">
      <div class="banner">
        <div class="logo">
          <img src="https://mapsindoors.github.io//logos/web-logo.svg" style="padding:10px">
        </div>
        <div class="name">
          <strong>Web SDK <span class="version">1.4.1</span></strong>
          
        </div>
      </div>
    </a>
    
  
    
    
    
  
  <hr />
  <div class="scrollable">
    <div class="wrapper">
      <div class="toc">
          
          
          
          
          
          
          
          
                  
          <ul>
            
            


<li>
    <span class="section">Web SDK</span>
    <ul>
      
        
        



<a  title="Getting Started" href="https://mapsindoors.github.io/web">
	
	Getting Started
</a>



      
        
        



<a class="current" title="Next Steps" href="https://mapsindoors.github.io/web/guide-part2">
	
	Next Steps
</a>


<ul id="scrollspy">
</ul>


      
        
        



<a  title="Reference Docs" href="https://mapsindoors.github.io/web/reference">
	
	Reference Docs
</a>



      
    </ul>
</li>
          </ul>
          
          
          
          
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          

          
          <li>
            <a href="https://github.com/MapsIndoors" target="_blank" title="@MapsIndoors on GitHub">
              @MapsIndoors on GitHub
            </a>
          </li>
          

          
          <li>
            <a href="https://mapspeople.com/support" title="Contact Support">
              Contact Support
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>MapsIndoors for Web - Part 2 </h1>

			

<h2 id="trying-the-showcase-web-app">Trying the Showcase Web App</h2>

<p>A <a href="https://github.com/MapsIndoors/Showcase-Web-App">showcase app is available on GitHub</a>, free to use and adapt to your needs.</p>

<h3 id="to-try-it-out-right-away">To try it out right away:</h3>

<p>Make sure nodejs, npm and gulp is installed on your system
Using a terminal/shell in the project folder, run the following commands:</p>

<ul>
<li>npm install -g browser-sync</li>
<li>gulp build</li>
<li>browser-sync start &ndash;server</li>
<li>If on Windows and prompted, allow server to use your PC network</li>
<li>Open your browser at <a href="http://localhost:3000/app">http://localhost:3000/app</a> (or whatever port browser-sync chooses per default)</li>
</ul>

<h2 id="create-a-search-and-suggestions-box">Create a Search and Suggestions box</h2>

<p>If you need to facilitate search functionality to your MapsIndoors solution, you can use the Suggestions UI component. Add the suggestions stylesheet as a starting point for the design.</p>

<pre><code class="language-html">&lt;link href=&quot;https://app.mapsindoors.com/mapsindoors/js/sdk/ui/Suggestions.css&quot; rel=&quot;stylesheet&quot; /&gt;
</code></pre>

<p>Add the following html somewhere in your document.</p>

<pre><code class="language-html">&lt;div id=&quot;search-box&quot; class=&quot;mapsindoors search-container&quot;&gt;
    &lt;input type=&quot;search&quot; placeholder=&quot;Search rooms and facilites...&quot; class=&quot;mapsindoors search&quot;&gt;
    &lt;ul class=&quot;mapsindoors suggestions&quot;&gt;&lt;/ul&gt;
&lt;/div&gt;
</code></pre>

<p>Given the above code, here is a simple example on how to use the component.</p>

<pre><code class="language-javascript">// Div containing an input search element
var searchDiv = document.getElementById('search-box');

// If needed, insert the div element as a map control
googleMap.controls[google.maps.ControlPosition.TOP_LEFT].push(searchDiv);

// Instantiates suggestions object
var suggestions = new mapsindoors.Suggestions(searchDiv);

// Listen for user interaction - returns the selected location
google.maps.event.addListener(suggestions, 'location_changed', function (location) {
    console.dir(location);
});
</code></pre>

<h3 id="setting-the-floor">Setting the floor</h3>

<p>Sets the current visible floor. This will make visible the corresponding floorplans and the icons on top of it. If the floor index provided does not correlate to any building floor, then the “nearest” floor will be activated. E.g. providing <code>setFloor(4)</code> on a three story building (with floor-indexes 0, 1, 2) will make the topmost floorplan visible (with floor-index 2).
Although floors may have names (“G” for 0, “M1” for 1, “M2” for 2 etc.) you need to set the floor using the index-value.</p>

<pre><code class="language-javascript">mapsIndoors.setFloor(4)
</code></pre>

<h3 id="getting-the-floor">Getting the floor</h3>

<p>Returns current floor index number (integer), e.g. 0 for ground floor, -1 for basement.</p>

<pre><code class="language-javascript">mapsIndoors.getFloor()
</code></pre>

<h2 id="using-the-directionsrenderer">Using the directionsRenderer</h2>

<p>Constructor. Takes directions render options as required parameter.</p>

<pre><code class="language-javascript">var directionsRenderer = new mapsindoors.DirectionsRenderer(
{
   map: googleMap,               // The Google map on which to render
   mapsindoors: mapsIndoors,     // The MapsIndoors instance
   suppressMarkers: boolean,     // Optional - If true, action/step point markers will not be rendered
   directions: directionsObject, // Optional - the actual directions object containing the directions data
   legIndex: number              // Optional - the part of the route which should render (0, 1, 2, n), defaults to 0. Highest index is directionsObject.legs.length - 1.
}
);
</code></pre>

<h3 id="setting-the-style-of-the-direction-renderer">setting the style of the direction renderer</h3>

<p>Sets the directions rendering style. For twaeking style of route polylines we use the <a href="https://developers.google.com/maps/documentation/javascript/reference#PolylineOptions">Google Maps v3 API PolylineOptions</a> format. The methods first parameter refers to a style type that can be either the travel mode for outdoor routes or the type of way for indoor routes. The possible style types include:</p>

<ul>
<li>default – The default style, will be used for all non-specified styles.</li>
<li>driving – Style for driving travel mode.</li>
<li>walking – Style for walking travel mode.</li>
<li>transit – Style for transit travel mode.</li>
<li>bicycling – Style for transit travel mode.</li>
<li>footway – Style for regular indoor ways.</li>
<li>steps – Style for steps/stairs.</li>
<li>elevator – Style for elevators.</li>
<li>escalator – Style for elevators.</li>
<li>travellator – Style for travellators.</li>
<li>residential – Style for roads at a venue.</li>
</ul>

<pre><code class="language-javascript">var directionsRenderer = new mapsindoors.DirectionsRenderer();

directionsRenderer.setStyle('default',
{
   clickable:  boolean                                 // Indicates whether this Polyline handles mouse events. Defaults to true.
   icons: Array&lt;IconSequence&gt;                          // The icons to be rendered along the polyline.
   path: MVCArray&lt;LatLng&gt;|Array&lt;LatLng|LatLngLiteral&gt;  // The ordered sequence of coordinates of the Polyline. This path may be specified using either a simple array of LatLngs, or an MVCArray of LatLngs. Note that if you pass a simple array, it will be converted to an MVCArray Inserting or removing LatLngs in the MVCArray will automatically update the polyline on the map.
   strokeColor: string                                 // The stroke color. All CSS3 colors are supported except for extended named colors.
   strokeOpacity: number                               // The stroke opacity between 0.0 and 1.0.
   strokeWeight: number                                // The stroke width in pixels.
   visible: boolean                                    // Whether this polyline is visible on the map. Defaults to true.
   zIndex: number                                      // The rendering index in relation to other polylines
}
);
</code></pre>

<h3 id="setting-the-direction">Setting the direction</h3>

<p>Renders the route result using the applied render options. Used in conjunction with a DirectionsService, this is an example of displaying a route on the map.</p>

<pre><code class="language-javascript">var googleMap = new google.maps.Map(...);

var directionsService = new mapsindoors.DirectionsService();
var renderer = new mapsindoors.DirectionsRenderer({ map: googleMap });

directionsService.route(
   {
      origin: {
         lat: 55.687791059149376,
         lng: 12.571580452361996,
         floor: 0
      },
      destination: {
         lat: 55.687476568798,
         lng: 12.568619293609554,
         floor: 0
      },
      travelMode: &quot;WALKING&quot;
      avoidStairs: true
   }
).then(function (result) {
   renderer.setDirections(result);
});
</code></pre>

<h3 id="getting-the-location-using-queries">Getting the location using queries</h3>

<p>Get locations from MapsIndoors using a query object (optional). With no query parameter, all published locations will be fetched.</p>

<pre><code class="language-javascript">var locations = new mapsindoors.LocationsService();

locations.getLocations(
{
   q: &quot;lounge&quot;,         //Search for matches in location name or aliases
   building: &quot;34&quot;,      //Fetch from specific building, using the administrative id of the building
   venue: &quot;VenueA&quot;,     //Fetch from specific venue, using name of venue
   floor: 1,                     //Fetch from 1st floor
   take: 10,                     //Fetch only 10 locations
   skip: 10,                     //Skip first 10 in result
   near: {lat:57.5, lng: 12.9}   //Sort by proximity to geographic point
   radius: 50,           //Fetch only nearest within meters from near
   orderBy: &quot;name&quot;      //Sort by name (possible values are Name, Floor,
                        //Building, Venue, Type and RoomId)
}
).then(function(data) {
   // returns an array of locations that matches the criteria
});
</code></pre>

<h3 id="clearing">Clearing</h3>

<p>Clear the current route rendering.</p>

<pre><code class="language-javascript">directionsRenderer.clear();
</code></pre>

<h2 id="using-the-directionsservice">Using the directionsService</h2>

<p>Constructor. Instantiates a service that can be used for making route requests.</p>

<pre><code class="language-javascript">route( request:DirectionsRequest )
</code></pre>

<p>Request routing from a point to another. The request object aligns to the <a href="https://developers.google.com/maps/documentation/javascript/3.exp/reference#DirectionsRequest">Google Maps V3 API DirectionsRequest object specification</a>, but with floor properties on origin and destination. Furthermore, avoidStairs boolean can be set to request routes for both disabled users and users without disabilities.</p>

<pre><code class="language-javascript">var directionsService = new mapsindoors.DirectionsService();

directionsService.route(
{
   origin: {lat:57.5, lng: 12.9, floor: 0},
   destination: {lat:57.5, lng: 12.9, floor: 0},
   // MapsIndoors options
   avoidStairs: true,
   // Google Directions options
   travelMode: google.maps.TravelMode,
   transitOptions: {...},
   avoidFerries: true,
   ...
}
).then(function(routeResult) {
   // Result will contain possible routes or none if routing failed.
});
</code></pre>

<h2 id="using-the-locationservice">Using the LocationService</h2>

<p>Constructor.</p>

<pre><code class="language-javascript">LocationsService()
</code></pre>

<h3 id="getting-the-categories">Getting the categories</h3>

<p>Get the unique categories and their translation used by published locations. Typically, this can be used to build a menu for list or map filtering of locations.</p>

<pre><code class="language-javascript">var locations = new mapsindoors.LocationsService();

locations.getCategories().then(function(categories) {
   // Returns localized category list with structure { office: &quot;Office&quot;, ... } e.g. for english.
});
</code></pre>

<h3 id="getting-the-types">Getting the types</h3>

<p>A set of location types is defined for every MapsIndoors solution. The current list of types can be retrieved like this:</p>

<pre><code class="language-javascript">var locations = new mapsindoors.LocationService();

locations.getTypes().then(function(types) {
   // returns array of types with format { name:string, icon:string }
});
</code></pre>

<h3 id="getting-the-location-details">Getting the location details</h3>

<p>Get the full details object of a single location. Pass the MapsIndoors id string present in any location object at <code>location.id</code>.</p>

<pre><code class="language-javascript">var locations = new mapsindoors.LocationsService();
// Get all locations
locations.getLocations().then(function(data) {
   locations.getLocationDetails(data[0].id).then(function(detailedData) {
      // Returns a full-detail location object
   });
});
</code></pre>


			<aside class="copyright" role="note">
				
				&copy; 2017 MapsIndoors (c)2017 &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="https://mapsindoors.github.io/web/" title="MapsIndoors for Web - Getting started">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              MapsIndoors for Web - Getting started
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="https://mapsindoors.github.io/web/reference/" title="MapsIndoors for Web - Reference Guide">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              MapsIndoors for Web - Reference Guide
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'https:\/\/mapsindoors.github.io\/';
      var repo_id  = 'MapsIndoors\/';
    
    </script>

    <script src="https://mapsindoors.github.io/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    
      <script>
        (function(i,s,o,g,r,a,m){
          i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||
          []).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;
          m.parentNode.insertBefore(a,m)
        })(window, document,
          'script', '//www.google-analytics.com/analytics.js', 'ga');
         
        ga('create', 'UA-63919776-1', 'auto');
        ga('set', 'anonymizeIp', true);
        ga('send', 'pageview');
         
        var buttons = document.querySelectorAll('a');
        Array.prototype.map.call(buttons, function(item) {
          if (item.host != document.location.host) {
            item.addEventListener('click', function() {
              var action = item.getAttribute('data-action') || 'follow';
              ga('send', 'event', 'outbound', action, item.href);
            });
          }
        });
         
        var query = document.querySelector('.query');
        query.addEventListener('blur', function() {
          if (this.value) {
            var path = document.location.pathname;
            ga('send', 'pageview', path + '?q=' + this.value);
          }
        });
      </script>
    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

