<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>MapsIndoors Data API - Indoor Navigation Built with Google Maps</title>
    <meta name="generator" content="Hugo 0.26" />

    
    <meta name="description" content="Everything you need to get started with MapsIndoors.">
    
    <link rel="canonical" href="https://mapsindoors.github.io/dataapi/v1/">
    
    <meta name="author" content="MapsPeople">
    

    <meta property="og:url" content="https://mapsindoors.github.io/dataapi/v1/">
    <meta property="og:title" content="Indoor Navigation Built with Google Maps">
    <meta property="og:image" content="https://mapsindoors.github.io/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="Indoor Navigation Built with Google Maps">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://mapsindoors.github.io/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://mapsindoors.github.io/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://mapsindoors.github.io/fonts/icon.eot');
        src: url('https://mapsindoors.github.io/fonts/icon.eot')
               format('embedded-opentype'),
             url('https://mapsindoors.github.io/fonts/icon.woff')
               format('woff'),
             url('https://mapsindoors.github.io/fonts/icon.ttf')
               format('truetype'),
             url('https://mapsindoors.github.io/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://mapsindoors.github.io/stylesheets/application.css">
    <link rel="stylesheet" href="https://mapsindoors.github.io/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://mapsindoors.github.io/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://mapsindoors.github.io/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,700|Roboto&#43;Mono">
    <style>
      body, input {
        font-family: 'Roboto', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Roboto Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <link rel="stylesheet" href="https://mapsindoors.github.io/style.css">
    
    <script src="https://mapsindoors.github.io/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-green palette-accent-orange">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
    
  <div class="bar default">
      
      
      <div class="button button-home" role="button" aria-label="Back">
        <a href="https://mapsindoors.github.io/" title="Back" class="toggle-button icon icon-close"></a>
      </div>
      
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        MapsIndoors Data API
      </div>
    </div>

    <div class="button mapspeople-logo" role="button" aria-label="MapsPeople">      
      <a href="https://mapspeople.com" class="logo">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576.6 110.1" enable-background="new 0 0 576.6 110.1">
        <style type="text/css">.logo0{fill:#008441;} .logo1{fill:#48A842;} .logo2{fill:#89C13D;} .logo3{fill:#BFD730;}</style><path class="logo0" d="M38.3 30.4c4.3-3 10.4-4.8 14.9-4.8 14.2 0 20.1 7.4 20.1 19.2v37.8H59.2V45.4c0-4.1-2.3-6-6-6-4.8 0-7.7 1.4-9.5 2.2v41H29.6V45.4c0-4.1-2.3-6-6-6-4.2 0-7.2 1.2-9.5 2.2v41H0V27.4h9.9l.8 1.9c3.9-2.2 9-3.6 12.8-3.6 7.8-.1 11.9 1.9 14.8 4.7z"></path><path class="logo1" d="M117.4 45.1c0-3.9-2-5.7-7.1-5.7-5.4 0-12.8 1.4-18.6 3.5v-14c6.1-2.8 13.7-3.3 18.6-3.3 16.7 0 21 8.1 21 20.2v36.8h-9.8l-.8-1.7c-3.8 2-8.9 3.4-12.7 3.4-15.1 0-20-9.5-20-19.8 0-9.6 5.2-17.8 20-18.8l9.4-.6zm-9.1 13.5c-4.9.4-6.2 3.2-6.2 6 0 2.5.7 6 6.1 6 3 0 7.1-1.5 9.2-2.6V58l-9.1.6z"></path><path class="logo2" d="M147.6 27.4h9.8l.7 2c3.8-2.3 9.2-3.8 13.3-3.8 18.7 0 24 10.5 24 29.4 0 19-5.3 29.4-24 29.4-3 0-7.3-.9-10-2.1v27.9h-13.9V27.4zm13.8 41c2.3 1 6 2.1 9.8 2.1 8.4 0 10-6.6 10-15.6s-1.7-15.6-10-15.6c-3.8 0-7.5 1.1-9.8 2.1v27z"></path><path class="logo3" d="M230.5 47.5c15.8 1.5 19.4 7.4 19.4 17.7 0 9.3-5.4 19.2-22.2 19.2-5 0-13-1.7-17.4-3.4V66.5c5 1.9 11.7 4 17.6 4 6.5 0 8.4-2.8 8.4-5.2 0-2.2-1.3-3.9-7.1-4.4-15.5-1.5-19.4-8.1-19.4-16.7s5.2-18.7 20.8-18.7c4.9 0 10.8.8 17 3.6V43c-5.9-2.1-11.4-3.8-17-3.8-5.9 0-7.2 2.2-7.2 4.7-.1 1.9 1.1 3 7.1 3.6z"></path><path d="M269.4 78.5v31.6H266V27.5h1.5l1.6 4.3c4.9-3.2 13.2-4.8 19.6-4.8 18.6 0 23.2 12.2 23.2 28.1 0 15.9-4.6 28.1-23.2 28.1-6.3-.1-14.3-1.6-19.3-4.7zm0-43.9v40.9c5 3.1 11.4 4.6 19.3 4.6 16.7 0 19.7-12.7 19.7-25.1 0-12.4-3-25.1-19.7-25.1-7.8 0-14.2 1.6-19.3 4.7zM368.8 77.4v3c-4.4 1.7-11.8 2.8-17.8 2.8-18.6 0-23.2-11.7-23.2-28.1S332.4 27 351 27s20.6 11.9 20.6 28.1v1.5h-40.4c.2 12.4 3.7 23.6 19.7 23.6 8.4-.1 13.8-1.5 17.9-2.8zm-.5-23.9c0-12-1.2-23.6-17.3-23.6-16 0-19.5 11.1-19.7 23.6h37zM409.6 27c19.6 0 23.1 11.9 23.1 28.1 0 16.2-3.5 28.1-23.1 28.1s-23.1-11.9-23.1-28.1c-.1-16.2 3.4-28.1 23.1-28.1zm0 53.1c17.6 0 19.6-11.2 19.6-25.1 0-13.9-2-25.1-19.6-25.1S389.9 41.2 389.9 55c0 13.9 2 25.1 19.7 25.1zM452 78.5v31.6h-3.4V27.5h1.5l1.6 4.3c4.9-3.2 13.2-4.8 19.6-4.8 18.6 0 23.2 12.2 23.2 28.1 0 15.9-4.6 28.1-23.2 28.1-6.3-.1-14.4-1.6-19.3-4.7zm0-43.9v40.9c5 3.1 11.4 4.6 19.3 4.6C488 80.1 491 67.5 491 55c0-12.4-3-25.1-19.7-25.1-7.9 0-14.3 1.6-19.3 4.7zM519.8 83.1c-5.9 0-8.5-2.6-8.5-8V0h3.4v74.9c0 4.2 1.1 5.6 5.2 5.6v2.6zM573.8 77.4v3c-4.4 1.7-11.8 2.8-17.8 2.8-18.6 0-23.2-11.7-23.2-28.1S537.3 27 556 27c18.6 0 20.6 11.9 20.6 28.1v1.5h-40.4c.2 12.4 3.7 23.6 19.7 23.6 8.4-.1 13.7-1.5 17.9-2.8zm-.6-23.9c0-12-1.2-23.6-17.3-23.6S536.4 41 536.2 53.5h37z"></path></svg>
      </a>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/MapsIndoors" title="@MapsIndoors on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">

  
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
    <a href="https://mapsindoors.github.io/dataapi/v1" class="project">
      <div class="banner">
        <div class="logo">
          <img src="https://mapsindoors.github.io//logos/dataapi-logo.svg" style="padding:10px">
        </div>
        <div class="name">
          <strong>Data API <br /><span class="version">Version 1</span></strong>
          
        </div>
      </div>
    </a>
    
  
  <hr />
  <div class="scrollable">
    <div class="wrapper">
      <div class="toc">
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
                  
          <ul>
            
            


<li>
    <span class="section">Data API</span>
    <ul>
      
        
        



<a  title="Introduction" href="https://mapsindoors.github.io/web/v1">
	
	Introduction
</a>



      
    </ul>
</li>
          </ul>
          
        

        
        <hr>
        <span class="section">Useful links</span>
        
        <ul>
          

          
          <li>
            <a href="https://github.com/MapsIndoors" target="_blank" title="@MapsIndoors on GitHub">
              @MapsIndoors on GitHub
            </a>
          </li>
          

          
          <li>
            <a href="https://mapspeople.com/support" title="Contact Support">
              Contact Support
            </a>
          </li>
          
          <li>
            <a href="https://status.mapsindoors.com" title="MapsIndoors System Status">
              System Status
            </a>
          </li>
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>MapsIndoors Data API </h1>

			

<h2 id="introduction-and-getting-started">Introduction and getting started</h2>

<p>From the Mapsindoors API you can get, add, change and delete rooms and points of interest from your MapsIndoors™ solution via a REST service.</p>

<p>The Public API can be found here:</p>

<p><a href="https://public.mapsindoors.com">https://public.mapsindoors.com</a></p>

<p>There is a (swagger) interface definition here</p>

<p><a href="https://public.mapsindoors.com/doc">https://public.mapsindoors.com/doc</a></p>

<p><strong>Note that only https is supported.</strong></p>

<h3 id="login-and-credentials">Login and credentials</h3>

<p>The first thing needed is to log in to the service and get a security token used for the data endpoints.</p>

<p>[HttpPost, Route(&ldquo;token&rdquo;)]</p>

<p>The interface supports two ways to login. Via Google or via a simple username/password pair.</p>

<pre><code>Login with username/password:


Use the following headers


Content-Type: application/x-www-form-urlencoded


Use the following Key/Values


Key: grant_type Value: password


Key: username Value: &lt;your username&gt;


Key: password Value: &lt;your password&gt;
</code></pre>

<p>The body of the request should end up containing a text like this:</p>

<p>grant_type=password&amp;username=<your username>&amp;password=<your password></p>

<p>To use Google login you will need to set grant_type to google_id_token instead.</p>

<p>The <a href="https://developers.google.com/identity/protocols/OAuth2">google accounts API </a>is to be used to obtain a valid Google token. This is outside the scope of this document.</p>

<p><strong>Use the following headers for login with username/password:</strong></p>

<pre><code>Use the following headers


Content-Type: application/x-www-form-urlencoded


Use the following Key/Values


Key: grant_type Value: google_id_token


Key: id_token Value: &lt;your google token&gt;
</code></pre>

<h3 id="endpoints">Endpoints</h3>

<p>The public data api consists on a number of endpoints to access the various data. The description of those can be found in <a href="https://public.mapsindoors.com/doc">swagger</a>.</p>

<p>In swagger each GET method are pre-loaded with all mandatory fields needed for you to get a live example of data just by pressing the ‘_Try it now_’ button.</p>

<h2 id="data-description">Data description</h2>

<h3 id="dataset">Dataset</h3>

<p>The main start point for your data is the dataset object. This object contains information about the entire data set such as languages and where to find more data.</p>

<p>The demo dataset looks like this</p>

<pre><code>{
  &quot;id&quot;: &quot;550c26a864617400a40f0000&quot;,
  &quot;name&quot;: &quot;RTX&quot;,
  &quot;availableLanguages&quot;: [
    &quot;en&quot;,
    &quot;da&quot;
  ],
  &quot;baseLanguage&quot;: &quot;en&quot;,
  &quot;rootObjects&quot;: [
    &quot;550c286964617400a4100000&quot;
  ]
}
</code></pre>

<p>It tells which languages are defined for this project, which language is the default one (english here) and it has a “<code>rootObjects</code>“ reference list which refers to the geospatial data that makes up the bulk of a mapsindoors solution the root objects are Geodata objects.</p>

<h3 id="geodata">Geodata</h3>

<p>All geospasial data, geodata, is arranged in a simple tree. Each element has a parent ID (except the root) so as an example, a point of interest can have room parent. The room will typically be on a floor in a building on a venue. Venues are typical root object.</p>

<p><img src="geodata-structure.png" alt="Geodata Structure" /></p>

<p>The top three layers (venues, buildings and floors) are created and maintained by Mapspeople so data from these can be read but not altered via this API.</p>

<ul>
<li>Rooms can be updated only</li>
<li>POIs can be created, updated and deleted</li>
</ul>

<p>Rooms have a polygon that describes where it is on the map. POIs are noted with a single point on the map and is typically something inside a room - important things like the coffee machine.</p>

<p>To read, change or delete geodata use the geo data endpoints described here</p>

<p><a href="https://public.mapsindoors.com/doc/ui/index#/Geodata">https://public.mapsindoors.com/doc/ui/index#/Geodata</a></p>

<p>Note that when you get data you only specify the datasetId hence you get the entire tree! The other Geodata endpoints works on individual Geodata objects.</p>

<h2 id="detailed-data-description">Detailed data description</h2>

<h3 id="geodata-1">Geodata</h3>

<p>Each Geodata element has a number of properties. Let&rsquo;s look at an example - a coat hanger in a room from the demo solution.</p>

<pre><code> {
    &quot;id&quot;: &quot;573dc6f63fcacf0d88c56edd&quot;,
    &quot;parentId&quot;: &quot;f43b931f09314f3f9dd796f9&quot;,
    &quot;datasetId&quot;: &quot;550c26a864617400a40f0000&quot;,
    &quot;baseType&quot;: &quot;poi&quot;,
    &quot;displayTypeId&quot;: &quot;d7558711f7c64534972cc65f&quot;,
    &quot;geometry&quot;: {
      &quot;coordinates&quot;: [
        9.956830884329975,
        57.085763732415764
      ],
      &quot;type&quot;: &quot;Point&quot;
    },
    &quot;aliases&quot;: [],
    &quot;categories&quot;: [],
    &quot;status&quot;: 3,
    &quot;properties&quot;: {
      &quot;name@en&quot;: &quot;Coat stand (RT)&quot;,
      &quot;name@da&quot;: &quot;Coat stand (RT)&quot;
    }
  }

</code></pre>

<ul>
<li><p>Id and ParentId</p>

<p>All elements has a unique 12 byte id. For elements (other than the root) there is also a parentId which links to the element it’s connected to - in this case the ground floor.</p></li>

<li><p>baseType</p>

<p>Tells what kind of data it is - it can be poi, room, floor, building, or venue</p></li>

<li><p>displayTypeId</p>

<p>Is a reference to the display type as described below. All rooms and poi geodata requires this to be set. As this is an ID, the reference is a 12 byte format as described above.</p></li>

<li><p>Geometry</p>

<p>Contains the actual geodata - where it is on the map. It’s borrowed from <a href="http://geojson.org">GeoJSON</a> - and in this case it’s a point to describe the poi.</p></li>

<li><p>Aliases</p>

<p>Is an optional list of aliases for this data written as a list of non-translated text. This can be used eg. if a building or room has a common nickname users could use when searching for it</p></li>

<li><p>Categories</p>

<p>Is a reference to the category data as described below. Geo data is not required to be part of a group - like in this example. As this is an ID, the reference is a 12 byte format as described above.</p></li>

<li><p>Status</p>

<p>Is a <a href="https://en.wikipedia.org/wiki/Bit_field">bitfield</a>.</p>

<p>bit1: active. If an element is not active it will not be given to the apps.</p>

<p>bit2: searchable. If an element is not searchable it might be shown on the map, but no show up in searches.</p>

<p>As there are two bits, the final values can be:</p>

<p>0: Not active, Not searchable</p>

<p>1: active, Not searchable</p>

<p>2: Not active, searchable (not a very useful combo)</p>

<p>3: active, searchable</p></li>

<li><p>Properties</p>

<p>Contains other data about the geodata object such as names, description or even custom data like gate numbers, vendor id, exhibition id or other data needed.</p>

<p>Name is mandatory - at least for the base language set for the dataset</p>

<p>The key format is: <keyname>@<language></p>

<p>Eg. name in english will be ‘name@en’ - in the example with a value of “Coat stand (RT)”</p>

<p>As this is a dictionary setup, the keyname needs to be unique and it’s recommended to only use ascii chars here. Use of spaces and unicode chars here is discouraged as it makes it harder to use from the application code side. The char @ is not supported in the keyname as it’s used as a seperator. As example if you want to store opening hours here you could use the key openinghours@en as a keyname.</p></li>
</ul>

<h3 id="displaytypes">DisplayTypes</h3>

<p>Common setup for geodata of different kinds (meeting room, hallway, &hellip;)</p>

<pre><code> {
    &quot;id&quot;: &quot;bb5410b32a5240d182ba50bb&quot;,
    &quot;name&quot;: &quot;BreakOutArea&quot;,
    &quot;displayRules&quot;: [
      {
        &quot;name&quot;: &quot;default&quot;,
        &quot;zoomFrom&quot;: 19,
        &quot;zoomTo&quot;: 21,
        &quot;iconUrl&quot;: &quot;https://app.mapsindoors.com/mapsindoors/gfx/bella/80/BreakOutArea.png&quot;,
        &quot;iconVisible&quot;: true
      }
    ],
    &quot;propertyTemplates&quot;: [
      {
        &quot;text&quot;: &quot;phone&quot;,
        &quot;type&quot;: &quot;text&quot;
      }
    ]
  }

</code></pre>

<ul>
<li><p>Id</p>

<p>All elements has a unique 12 byte id. This is used when referencing - eg when referencing from individual geodata</p></li>

<li><p>Name</p>

<p>The name of a display type is a secondary ID. This can be used as an alternative to the main ID. Note that this is NOT a 12 byte id.</p></li>

<li><p>DisplayRules</p>

<p>Each type has roles that tells if and how geodata should be presented. Eg. which icon to use for meeting rooms, when it should be shown based on zoom level or if it should have a label. There are two parts to a rule: An <strong>evaluation</strong> part (zoom from/to) and a <strong>style</strong> part - the rest of the displayRule object. Zoom from and to is inclusive. In this example an icon will be shown from zoom level 19 to 21. A quick word on zoom levels: these are described in <a href="https://en.wikipedia.org/wiki/Web_Mercator_projection">web mercator</a> which is the system we use to show maps. In short zoom level 1 shows a map of earth in its entirety and a higher zoom level lets you get closer. The highest supported zoom level is 21 at the moment.</p></li>

<li><p>PropertyTemplates</p>

<p>The property templates is an option list of which extra properties new geodata of the given types should be made. In this case all pois of type “breakout areas” will have a field in the CMS to enter a phone number for the new poi. This will then be stored as a property on that geodata.</p></li>
</ul>

<p>Note that the display type data is split in the CMS; currently it can be found in the fans “Location types”, “Location type templates” and “Type visibility”</p>

<h3 id="categories">Categories</h3>

<p>Categories are used to group Geodata together. As an example rooms or POIs in some department - eg “development” or “marketing” can be set in each their group. Using groups are not mandatory and thus each geodata can link to “none to many” categories.</p>

<p>This grouping is then used as a relevancy criteria when searching.</p>

<p>As a simple example: All rooms across any building/venue related to entrances can be grouped using this example:</p>

<pre><code> {
    &quot;id&quot;: &quot;5823246d07215b23a02e3cdd&quot;,
    &quot;name&quot;: {
      &quot;en&quot;: &quot;Entrance&quot;,
      &quot;da&quot;: &quot;Indgang&quot;
    }
  }

</code></pre>

<ul>
<li><p>Id</p>

<p>All elements has a unique 12 byte id. This is used when referencing - eg when referencing from individual geodata</p></li>

<li><p>Name</p>

<p>A translatable name for the category</p></li>
</ul>


			<aside class="copyright" role="note">
				
				&copy; 2019 MapsIndoors (c)2017 &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="https://mapsindoors.github.io/introductions/location-sources/" title="Location Sources in MapsIndoors">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Location Sources in MapsIndoors
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="https://mapsindoors.github.io/firststeps/" title="MapsIndoors First Steps">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              MapsIndoors First Steps
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'https:\/\/mapsindoors.github.io\/';
      var repo_id  = 'MapsIndoors\/';
    
    </script>

    <script src="https://mapsindoors.github.io/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    
      <script>
        (function(i,s,o,g,r,a,m){
          i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||
          []).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;
          m.parentNode.insertBefore(a,m)
        })(window, document,
          'script', '//www.google-analytics.com/analytics.js', 'ga');
         
        ga('create', 'UA-63919776-1', 'auto');
        ga('set', 'anonymizeIp', true);
        ga('send', 'pageview');
         
        var buttons = document.querySelectorAll('a');
        Array.prototype.map.call(buttons, function(item) {
          if (item.host != document.location.host) {
            item.addEventListener('click', function() {
              var action = item.getAttribute('data-action') || 'follow';
              ga('send', 'event', 'outbound', action, item.href);
            });
          }
        });
         
        var query = document.querySelector('.query');
        query.addEventListener('blur', function() {
          if (this.value) {
            var path = document.location.pathname;
            ga('send', 'pageview', path + '?q=' + this.value);
          }
        });
      </script>
    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

