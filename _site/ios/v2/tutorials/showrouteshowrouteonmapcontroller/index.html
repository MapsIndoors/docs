<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="/assets/style.css">
    <title>Document</title>
  </head>
  <body>
    <section class="container">
      
  <nav>
    <h2>iOS v2</h2>
    
    <ul class="sidebar-nav"><li><a href="/ios/v2/guides/">Guides</a></li>
<li class="bold"><a href="/ios/v2/tutorials/">Tutorials</a><ul><li><a href="/ios/v2/tutorials/locationdetailslocationdetailscontroller/">Show location details</a></li>
<li><a href="/ios/v2/tutorials/searchmysearchcontroller/">Create a Search Experience with MapsIndoors - Part 1</a></li>
<li><a href="/ios/v2/tutorials/showmylocationmypositionprovider/">Show the Blue Dot with MapsIndoors - Part 1</a></li>
<li><a href="/ios/v2/tutorials/showmylocationshowmylocationcontroller/">Show the Blue Dot with MapsIndoors - Part 2</a></li>
<li class="active"><a href="/ios/v2/tutorials/showrouteshowrouteonmapcontroller/">Get Directions and Show the Result on a Map - Part 1</a></li>
<li><a href="/ios/v2/tutorials/showrouteshowroutecontroller/">Get Directions and Show the Result on a Map - Part 2</a></li></ul></li>
<li><a href="/ios/v2/changelog/">Changelog</a></li></ul>
  </nav>


      <main>
        <blockquote>
<p>A <a href="https://www.markdownguide.org/ios/v3">newer version</a> of the MapsIndoors SDK for iOS is available. The legacy version will not receive new features and will only get critical bugfix and security updates.
{: .mi-warning}</p>
</blockquote>
<p>In this tutorial we will request a route, list the route parts and render these on a Google Map. A MapsIndoors route is made of one or more legs, each containing one or more steps.</p>
<p>We will start by making the controller that renders the route from the input of a route, a leg index and optionally a step index. Start by creating a <code>UIViewController</code> implementation that conforms to <code>MPDirectionsRendererDelegate</code></p>
<pre><code class="language-swift">class ShowRouteOnMapController: UIViewController, MPDirectionsRendererDelegate {
</code></pre>
<p>Setup member variables for <code>MySearchController</code>:</p>
<ul>
<li>An instance of type <code>GMSMapView</code></li>
<li>An instance of type <code>MPMapControl</code></li>
<li>An instance of type <code>MPRoute</code> (the route object)</li>
<li>A leg index</li>
<li>A step index</li>
</ul>
<pre><code class="language-swift">var map: GMSMapView? = nil
var mapControl: MPMapControl? = nil
var route:MPRoute? = nil
var leg:Int = -1
var step:Int = -1
</code></pre>
<p>Create an initializer for your input parameters</p>
<pre><code class="language-swift">convenience init(_ route:MPRoute, _ leg:Int, _ step:Int) {
    self.init(nibName:nil, bundle:nil)
    self.route = route
    self.leg = leg
    self.step = step
}
</code></pre>
<p>Setup the Google map and your <code>MPMapControl</code> instance</p>
<pre><code class="language-swift">self.map = GMSMapView.init(frame: CGRect.zero)
self.view = self.map
self.map?.camera = .camera(withLatitude: 57.057964, longitude: 9.9504112, zoom: 20)
self.mapControl = MPMapControl.init(map: self.map!)
</code></pre>
<p>Inside <code>viewDidAppear</code>, setup a directions renderer and assign the Google map, route object and leg/step indices. Eventually, call the animate method to make it animate from the start to end of the leg/step</p>
<pre><code class="language-swift">let renderer = MPDirectionsRenderer.init()

renderer.delegate = self
renderer.fitBounds = true

renderer.map = self.map
renderer.route = route

renderer.routeLegIndex = leg
renderer.routeStepIndex = step
renderer.animate(5)
</code></pre>
<p>In the <code>floorDidChange</code> delegate method change the floor on your <code>MPMapControl instance</code></p>
<pre><code class="language-swift">func floorDidChange(_ floor: NSNumber) {
    mapControl?.currentFloor = floor
}
</code></pre>
<p>In <a href="../showrouteshowroutecontroller">Part 2</a> we will create the map view controller that displays the blue dot.</p>
<p><a href="https://github.com/MapsIndoors/MapsIndoorsIOS/blob/master/Example/DemoSamples/Show%20Route/ShowRouteOnMapController.swift">See the sample in ShowRouteOnMapController.swift</a></p>

      </main>
    </section>
  </body>
</html>
