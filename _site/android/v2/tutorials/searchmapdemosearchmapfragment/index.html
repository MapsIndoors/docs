<blockquote>
<p>A <a href="https://www.markdownguide.org/android/v3">newer version</a> of the MapsIndoors SDK for Android is available. The legacy version will not receive new features and will only get critical bugfix and security updates.
{: .mi-warning}</p>
</blockquote>
<p>This is part 2 of the tutorial of creating a simple search experience using MapsIndoors. <a href="../searchmapdemosearchfragment">In Part 1 we created the search Fragment</a>. Now we will create the &quot;main&quot; controller displaying the map and eventually the selected location.</p>
<p>Start by creating a Fragment</p>
<pre><code class="language-java">public class SearchMapFragment extends Fragment
</code></pre>
<p>Add a <code>GoogleMap</code> and a <code>MapControl</code> to the class</p>
<pre><code class="language-java">MapControl mMapControl;
GoogleMap mGoogleMap;
</code></pre>
<p>Add other needed views for this example</p>
<pre><code class="language-java">SupportMapFragment mMapFragment;
Button searchButton;
Location locationToSelect = null;
</code></pre>
<p>A listener to report the click on the search Button to the activity</p>
<pre><code class="language-java">private OnFragmentInteractionListener mListener;
</code></pre>
<p>The lat lng of the Venue</p>
<pre><code class="language-java">static final LatLng VENUE_LAT_LNG = new LatLng( 57.05813067, 9.95058065 );
</code></pre>
<p>Setting the API key to the desired solution</p>
<pre><code class="language-java">if( !MapsIndoors.getAPIKey().equalsIgnoreCase( getString( R.string.mi_api_key ) ) )
{
    MapsIndoors.setAPIKey( getString( R.string.mi_api_key ) );
}
if( getActivity() == null )
{
    return;
}
</code></pre>
<p>Instanciate the MapControl object</p>
<pre><code class="language-java">mMapControl = new MapControl( getActivity(), mMapFragment, mGoogleMap );
</code></pre>
<ul>
<li>init the MapControl object which will sync data.</li>
<li>When the init is done, if the 'locationToSelect' is not null we call the 'mMapControl.selectLocation()' to select the desired location otherwise select a floor</li>
</ul>
<pre><code class="language-java">mMapControl.init( miError -&gt; {
    if( miError == null )
    {
        Activity context = getActivity();
        if( context != null )
        {
            context.runOnUiThread(() -&gt; {
                mGoogleMap.animateCamera( CameraUpdateFactory.newLatLngZoom( VENUE_LAT_LNG, 20f ) );
                if( locationToSelect != null )
                {
                    mMapControl.selectLocation( locationToSelect );
                    locationToSelect = null;
                }
                else
                {
                    mMapControl.selectFloor( 1 );
                }
            });
        }
    }
});
</code></pre>
<p>A public method to select a location</p>
<pre><code class="language-java">public void selectLocation(Location loc){
    locationToSelect = loc;
}
</code></pre>
<p><a href="https://github.com/MapsIndoors/MapsIndoorsAndroid-Demo-Samples/blob/master/app/src/main/java/com/mapsindoors/searchmapdemo/SearchMapFragment.java">See the sample in SearchMapFragment.java</a></p>
