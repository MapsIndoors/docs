<p>This guide explains how to start using a MapsIndoors map in your Android application using the MapsIndoors Android SDK v3.</p>
<p>To benefit from the guides, you will need basic knowledge about:</p>
<ul>
<li>Android Development</li>
<li>Google Maps Android API</li>
</ul>
<p>You can get started in two ways, either by reviewing and modifying the <a href="#basic-example">basic example</a> or do the <a href="#setup-mapsindoors">clean setup</a>.</p>
<h2>Basic Example</h2>
<p>You will find in the <a href="https://github.com/MapsIndoors/MapsIndoorsAndroid-Demo-Samples">link</a> a repo that contains the minimum code to start a MapsIndoors project.</p>
<p>You can also follow the steps below to start your app from scratch or to enhance the Basic Examples, more features will be explained in the <a href="/android/v3/guides">guides</a>.</p>
<h2>Setup MapsIndoors</h2>
<p>Add the MapsIndoors SDK as a dependency to your project. The AAR for the MapsIndoors SDK contains both Java classes, SDK resources and AndroidManifest.xml template which gets merged into your application’s AndroidManifest.xml during build process. Add or merge in the following to your app’s build gradle file (usually called build.gradle).</p>
<p>Make sure that the minimum Android SDK version is 21 or above:</p>
<pre><code class="language-groovy">android {
    defaultConfig {
        minSdkVersion 21
    }
    ...
}
</code></pre>
<p>MapsIndoors rely on Java 8 features, so you must add the following compile options, also in <em>android</em> section of your <em>build.gradle</em> file:</p>
<pre><code class="language-groovy">android {
    ...
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
}
</code></pre>
<p>Add the following dependencies and the MapsIndoors maven repository:</p>
<pre><code class="language-groovy">dependencies {
    ...
    implementation 'com.android.support:support-v4:27.1.0'
    implementation 'com.google.android.gms:play-services-maps:11.8.0'
    implementation 'com.google.code.gson:gson:2.8.2'
    implementation 'com.mapspeople.mapsindoors:mapsindoorssdk:{{%product-version%}}@aar'
}
repositories{
    maven {
        url 'http://maven.mapsindoors.com/'
    }
}
</code></pre>
<p>Put those lines in your proguard-rules files :</p>
<pre><code class="language-groovy">-keep interface com.mapsindoors.mapssdk.** { *; }
-keep class com.mapsindoors.mapssdk.errors.** { *; }
-keepclassmembers class com.mapsindoors.mapssdk.models.** { &lt;fields&gt;; }
-keep class com.mapsindoors.mapssdk.dbglog
</code></pre>
<p>Sync your project with gradle files.</p>
<h2>Setup Google Maps</h2>
<p>Learn how to setup Google Maps on Android in this <a href="https://developers.google.com/maps/documentation/android-api/start">Getting Started Guide</a>.</p>
<p>When getting your Google Maps API keys, remember to enable relevant Maps products (i.e. SDK for Android) in your Google project and include these on your API key if you apply restrictions.</p>
<h2>Setup a Google Map with MapsIndoors</h2>
<h3>Set the MapsIndoors API Key</h3>
<p>In order to include MapsIndoors in your app, you need an API key. If you are not a customer you can use this API key <code>57e4e4992e74800ef8b69718</code> to follow the guide.</p>
<p>In order to include MapsIndoors in your own app with your own content, you need to <a href="https://resources.mapspeople.com/contact-us">contact MapsPeople</a> to get your building drawings processed and hosted by us.</p>
<p>You will receive a unique API key to use when access has been granted. If you are exploring how this service can become part of your own product, you can read about <a href="https://www.mapspeople.com/become-a-partner">partnering with MapsPeople here</a>.</p>
<h3>Initialize MapsIndoors</h3>
<p>Place the following initialization code in the <code>onCreate</code> method in the activity that should display the Google map:</p>
<pre><code class="language-java">MapsIndoors.initialize(
  getApplicationContext(),
  &quot;YOUR_MAPSINDOORS_API_KEY&quot;,
  &quot;YOUR_GOOGLE_MAPS_API_KEY&quot;
);
</code></pre>
<p>In your <code>onMapReady</code> callback function, use the <code>MapControl</code> class to set up a Google map with MapsIndoors venues, buildings &amp; locations:</p>
<pre><code class="language-java">// Create a new MapControl instance
myMapControl = new MapControl( getApplicationContext(), mapFragment, mGoogleMap );

// Initialize MapControl to get the locations on the map, etc.
myMapControl.init( errorCode -&gt; {
  if( errorCode == null ) {
    runOnUiThread( () -&gt; {
      // Animate the camera to show the venue
      mGoogleMap.animateCamera( CameraUpdateFactory.newLatLngZoom( new LatLng( 57.05813067, 9.95058065 ), 19f ) );
    });
  }
});
</code></pre>
<p>Head to the <a href="/android/v3/guides">guides</a> to learn about event handling, searching, getting directions, display settings and more.</p>
<h2>Download and Bundle Offline Content</h2>
<p>If needed, it is possible to bundle MapsIndoors content to make your app work better in offline or poor network conditions. (Please note that while MapsIndoors content can be used offline, Google Maps does not provide offline features. Outdoor wayfinding, Google Places searches will be unavailable and the surrounding map may be unavailable unless it has been cached.)</p>
<p>In your <em>/res/values</em> folder, create a file named <code>mapsindoors_api.xml</code> with the following content:</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;resources&gt;
 &lt;string name=&quot;mapsindoors_api_key&quot; translatable=&quot;false&quot;&gt;YOUR_MAPSINDOORS_API_KEY&lt;/string&gt;
&lt;/resources&gt;
</code></pre>
<p>Replace:</p>
<ul>
<li><code>YOUR_MAPSINDOORS_API_KEY</code> with your MapsIndoors API key.</li>
</ul>
<p>In your apps build gradle file, add these two lines:</p>
<pre><code class="language-groovy">apply from: 'https://raw.githubusercontent.com/MapsIndoors/MapsIndoorsAndroid/SDK_V2/scripts/gradle/MapsIndoorsOfflineDataSync.gradle'
preBuild.dependsOn fetchData
</code></pre>
<p>Depending on the overall size of your MapsIndoors deployment, this may take some time, so during development you might want to comment out the script dependency.</p>
<h2>Work with MapsIndoors SDK behind a Firewall</h2>
<p>If you need to work with MapsIndoors SDK behind a firewall, you might need to <a href="../../ip-whitelisting">white-list some IP-adresses</a>.</p>
<ul>
  <li><a href="/android/v3/guides/">Guides</a> posted in  tagged ["android","v3"] on Mon Sep 30 2019 02:00:00 GMT+0200 (Central European Summer Time)</li>
  <li><a href="/android/v3/tutorials/">Tutorials</a> posted in  tagged ["android","v3"] on Mon Sep 30 2019 02:00:00 GMT+0200 (Central European Summer Time)</li>
  <li><a href="/android/v3/tutorials/locationdatasourcespeoplelocationdatasource/">Creating your own Location Data Source - Part 1</a> posted in  tagged ["android","v3","tutorials"] on Mon Sep 30 2019 02:00:00 GMT+0200 (Central European Summer Time)</li>
  <li><a href="/android/v3/tutorials/locationdatasourcesbatterieslocationdatasource/">Creating your own Location Data Source - Part 2</a> posted in  tagged ["android","v3","tutorials"] on Mon Sep 30 2019 02:00:00 GMT+0200 (Central European Summer Time)</li>
  <li><a href="/android/v3/tutorials/locationdatasourceslocationdatasourcesfragment/">Creating your own Location Data Source - Part 3</a> posted in  tagged ["android","v3","tutorials"] on Mon Sep 30 2019 02:00:00 GMT+0200 (Central European Summer Time)</li>
  <li><a href="/android/v3/tutorials/locationclusteringlocationclusteringfragment/">Work with location grouping / clustering</a> posted in  tagged ["android","v3","tutorials"] on Mon Sep 30 2019 02:00:00 GMT+0200 (Central European Summer Time)</li>
  <li><a href="/android/v3/tutorials/locationdetailsdemolocationdetailsfragment/">Show Location Details</a> posted in  tagged ["android","v3","tutorials"] on Mon Sep 30 2019 02:00:00 GMT+0200 (Central European Summer Time)</li>
  <li><a href="/android/v3/tutorials/searchmapdemosearchfragment/">Create a Search Experience with MapsIndoors - Part 1</a> posted in  tagged ["android","v3","tutorials"] on Mon Sep 30 2019 02:00:00 GMT+0200 (Central European Summer Time)</li>
  <li><a href="/android/v3/tutorials/searchmapdemosearchmapfragment/">Create a Search Experience with MapsIndoors - Part 2</a> posted in  tagged ["android","v3","tutorials"] on Mon Sep 30 2019 02:00:00 GMT+0200 (Central European Summer Time)</li>
  <li><a href="/android/v3/tutorials/showuserlocationdemopositionprovider/">Show the Blue Dot with MapsIndoors - Part 1</a> posted in  tagged ["android","v3","tutorials"] on Mon Sep 30 2019 02:00:00 GMT+0200 (Central European Summer Time)</li>
  <li><a href="/android/v3/tutorials/showuserlocationshowuserlocationfragment/">Show the Blue Dot with MapsIndoors - Part 2</a> posted in  tagged ["android","v3","tutorials"] on Mon Sep 30 2019 02:00:00 GMT+0200 (Central European Summer Time)</li>
  <li><a href="/android/v3/changelog/">Changelog</a> posted in  tagged ["android","v3"] on Wed Jan 29 2020 01:00:00 GMT+0100 (Central European Standard Time)</li>
</ul>
