<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
  </head>
  <body>
    
  <nav>
    <h2>Android v3</h2>
    
    <ul class="sidebar-nav"><li class="bold"><a href="/android/v3/guides/">Guides</a><ul><li><a href="/android/v3/tutorials/locationdatasourcespeoplelocationdatasource/">Creating your own Location Data Source - Part 1</a></li>
<li><a href="/android/v3/tutorials/locationdatasourcesbatterieslocationdatasource/">Creating your own Location Data Source - Part 2</a></li>
<li><a href="/android/v3/tutorials/locationdatasourceslocationdatasourcesfragment/">Creating your own Location Data Source - Part 3</a></li>
<li><a href="/android/v3/tutorials/locationclusteringlocationclusteringfragment/">Work with location grouping / clustering</a></li>
<li class="active"><a href="/android/v3/tutorials/locationdetailsdemolocationdetailsfragment/">Show Location Details</a></li>
<li><a href="/android/v3/tutorials/searchmapdemosearchfragment/">Create a Search Experience with MapsIndoors - Part 1</a></li>
<li><a href="/android/v3/tutorials/searchmapdemosearchmapfragment/">Create a Search Experience with MapsIndoors - Part 2</a></li>
<li><a href="/android/v3/tutorials/showuserlocationdemopositionprovider/">Show the Blue Dot with MapsIndoors - Part 1</a></li>
<li><a href="/android/v3/tutorials/showuserlocationshowuserlocationfragment/">Show the Blue Dot with MapsIndoors - Part 2</a></li></ul></li>
<li><a href="/android/v3/changelog/">Changelog</a></li></ul>
  </nav>

    <main>
      <p>This is an example of displaying some details of a MapsIndoors location</p>
<p>Start by creating a <code>Fragment or an Activity</code> class that contains the Google map fragment:</p>
<pre><code class="language-java">public class LocationDetailsFragment extends Fragment
//
{
</code></pre>
<p>Add a <code>GoogleMap</code> and a <code>MapControl</code> to the class:</p>
<pre><code class="language-java">MapControl mMapControl;
GoogleMap mGoogleMap;
</code></pre>
<p>Add other needed views for this example:</p>
<pre><code class="language-java">SupportMapFragment mMapFragment;
TextView detailsTextView;
</code></pre>
<p>The Venue's coordinates:</p>
<pre><code class="language-java">static final LatLng VENUE_LAT_LNG = new LatLng( 57.05813067, 9.95058065 );
</code></pre>
<p>Setup the needed views for this example:</p>
<pre><code class="language-java">private void setupView( View rootView )
{
    final FragmentManager fm = getChildFragmentManager();
    detailsTextView = rootView.findViewById( R.id.details_text_view );
    mMapFragment = (SupportMapFragment) fm.findFragmentById( R.id.mapfragment );
    mMapFragment.getMapAsync( mOnMapReadyCallback );
}
</code></pre>
<p>Once the map is ready move the camera to the venue location and call the setupMapsIndoors:</p>
<pre><code class="language-java">OnMapReadyCallback mOnMapReadyCallback = new OnMapReadyCallback() {
    @Override
    public void onMapReady( GoogleMap googleMap )
    {
        mGoogleMap = googleMap;
        mGoogleMap.moveCamera( CameraUpdateFactory.newLatLngZoom( VENUE_LAT_LNG, 13.0f ) );
        setupMapsIndoors();
    }
};
</code></pre>
<p>Setup MapsIndoors:</p>
<pre><code class="language-java">void setupMapsIndoors()
{
    final Activity context = getActivity();
    if( (context == null) || (mMapFragment == null) || (mMapFragment.getView() == null) )
    {
        return;
    }
</code></pre>
<p>Setting the API key to the desired solution. Needed here as we are switching solutions:</p>
<pre><code class="language-java">if( !MapsIndoors.getAPIKey().equalsIgnoreCase( getString( R.string.mi_api_key ) ) )
{
    MapsIndoors.setAPIKey( getString( R.string.mi_api_key ) );
}
</code></pre>
<p>Setting the Google API key:</p>
<pre><code class="language-java">MapsIndoors.setGoogleAPIKey( getString( R.string.google_maps_key ) );
</code></pre>
<p>Instantiate and init the MapControl object which will sync data:</p>
<pre><code class="language-java">mMapControl = new MapControl( context );
mMapControl.setGoogleMap( mGoogleMap, mMapFragment.getView() );
</code></pre>
<p>When a marker is clicked, get the related MapsIndoors location object and set the label text based on the name and description of the location:</p>
<pre><code class="language-java">mMapControl.setOnMarkerClickListener( marker -&gt; {
    final MPLocation loc = mMapControl.getLocation( marker );
    if( loc != null )
    {
        marker.showInfoWindow();
        if( detailsTextView.getVisibility() != View.VISIBLE )
        {
</code></pre>
<p>Show the Name and the description of a POI in a label:</p>
<pre><code class="language-java">detailsTextView.setText( &quot;Name: &quot; + loc.getName() + &quot;\nDescription: &quot; + loc.getDescription() );
detailsTextView.setVisibility( View.VISIBLE );
rue;
setOnMarkerInfoWindowCloseListener( marker -&gt; {
ilsTextView.getVisibility() == View.VISIBLE )
ilsTextView.setVisibility( View.INVISIBLE );
</code></pre>
<p>Init the MapControl object which will sync data:</p>
<pre><code class="language-java">mMapControl.init( miError -&gt; {
    if( miError == null )
    {
</code></pre>
<p>Select a floor and animate the camera to the venue position:</p>
<pre><code class="language-java">mMapControl.selectFloor( 1 );
mGoogleMap.animateCamera( CameraUpdateFactory.newLatLngZoom( VENUE_LAT_LNG, 20f ) );
</code></pre>
<p><a href="https://github.com/MapsIndoors/MapsIndoorsAndroid-Demo-Samples/blob/master/app/src/main/java/com/mapsindoors/locationdetailsdemo/LocationDetailsFragment.java">See the sample in LocationDetailsFragment.java</a></p>

    </main>
  </body>
</html>
