<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>MapsIndoors for Android - Getting Started - MapsIndoors Developers</title>
    <meta name="generator" content="Hugo 0.26" />

    
    <meta name="description" content="Everything you need to get started with MapsIndoors.">
    
    <link rel="canonical" href="https://mapsindoors.github.io/android/">
    
    <meta name="author" content="MapsPeople">
    

    <meta property="og:url" content="https://mapsindoors.github.io/android/">
    <meta property="og:title" content="MapsIndoors Developers">
    <meta property="og:image" content="https://mapsindoors.github.io/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="MapsIndoors Developers">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://mapsindoors.github.io/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://mapsindoors.github.io/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://mapsindoors.github.io/fonts/icon.eot');
        src: url('https://mapsindoors.github.io/fonts/icon.eot')
               format('embedded-opentype'),
             url('https://mapsindoors.github.io/fonts/icon.woff')
               format('woff'),
             url('https://mapsindoors.github.io/fonts/icon.ttf')
               format('truetype'),
             url('https://mapsindoors.github.io/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://mapsindoors.github.io/stylesheets/application.css">
    <link rel="stylesheet" href="https://mapsindoors.github.io/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://mapsindoors.github.io/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://mapsindoors.github.io/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,700|Roboto&#43;Mono">
    <style>
      body, input {
        font-family: 'Roboto', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Roboto Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <link rel="stylesheet" href="https://mapsindoors.github.io/style.css">
    
    <script src="https://mapsindoors.github.io/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-teal palette-accent-orange">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
    
  <div class="bar default">
      
      
      <div class="button button-back" role="button" aria-label="Back">
        <a href="../" title="Back" class="toggle-button icon icon-back"></a>
      </div>
      
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        MapsIndoors for Android - Getting Started
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/MapsIndoors" title="@MapsIndoors on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">

  
  
    
    
    
    <a href="https://mapsindoors.github.io/android" class="project">
      <div class="banner">
        <div class="logo">
          <img src="https://mapsindoors.github.io//logos/android-logo.svg" style="padding:10px">
        </div>
        <div class="name">
          <strong>Android SDK <span class="version">1.8.5</span></strong>
          
        </div>
      </div>
    </a>
    
  
    
    
    
  
    
    
    
  
    
    
    
  
  <hr />
  <div class="scrollable">
    <div class="wrapper">
      <div class="toc">
          
          
                  
          <ul>
            
            


<li>
    <span class="section">Android SDK</span>
    <ul>
      
        
        



<a class="current" title="Getting Started" href="https://mapsindoors.github.io/android">
	
	Getting Started
</a>


<ul id="scrollspy">
</ul>


      
        
        



<a  title="Next Steps" href="https://mapsindoors.github.io/android/guide-part2">
	
	Next Steps
</a>



      
        
        



<a  title="Reference Docs" href="https://app.mapsindoors.com/mapsindoors/reference/android/index.html">
	
	Reference Docs
</a>



      
    </ul>
</li>
          </ul>
          
          
          
          
          
          
          
          
          
          
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          

          
          <li>
            <a href="https://github.com/MapsIndoors" target="_blank" title="@MapsIndoors on GitHub">
              @MapsIndoors on GitHub
            </a>
          </li>
          

          
          <li>
            <a href="https://mapspeople.com/support" title="Contact Support">
              Contact Support
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>MapsIndoors for Android - Getting Started </h1>

			

<h2 id="basic-example">Basic Example</h2>

<p>You will find in the <a href="https://github.com/namine92/mapsIndoorAndroidTut">link</a> an up and running project that contains the minimum code to start a MapsIndoors project.</p>

<p>You can also follow the steps below to start your app from scratch or to enhance the Basic Example, more advanced feature will be explained in the <a href="https://mapsindoors.github.io/android/guidepart2">part 2</a> of this tutorial with a demo app that gives a showcase of the mapsIndoors in a complete app that you can test also.</p>

<h2 id="setup-mapsindoors-dependencies">Setup MapsIndoors dependencies</h2>

<p>Add the MapsIndoors SDK as a dependency to your project.
The AAR for the MapsIndoors SDK contains both Java classes, SDK resources and AndroidManifest.xml template which gets merged into your application’s AndroidManifest.xml during build process.
Add or merge in the following to your app’s build gradle file (usually called build.gradle).</p>

<pre><code class="language-groovy">dependencies {
   compile 'com.google.android.gms:play-services-maps:9.8.0'
   compile 'com.google.code.gson:gson:2.4'
   compile 'com.mapspeople.mapsindoors:mapsindoorssdk:1.8.5@aar'
}
repositories{
   maven {
      url 'http://maven.mapsindoors.com/'
   }
}
</code></pre>

<p>If you somehow downloaded an AAR file, the above does not apply.
To add the MapsIndoors Library to an existing Android Studio project add a new Module. First select Android from the project tap, then right click and select <code>App -&gt; New -&gt; Module</code>.</p>

<p>A “create new Module” window will open. Browse to the .aar file from the SDK, select it and press ‘finish’ to add the MapsIndoors module.
Finally, your app will need a dependency on the MapsIndoors module. To do that open the module settings from the Project tab where you just added the module (default hotkey is F4).</p>

<p>Click the green plus and add the MapsIndoor module to your app dependency list and. Close the window and recompile your app. You are now ready to use indoor maps.
Notice that there on Android Studio is no inline-documentation support at this time. The code documentation can be found in the Android/AndroidStudio/doc folder.</p>

<h2 id="using-mapcontrol">Using MapControl</h2>

<p>Use the MapControl class for extending a Google map’s display and functionality with MapsPeople’s buildings, overlays, locations/points-of-interest, position and navigation.
To fire up a venue on a google map, first set up the google map, then create a MapControl with your MapsPeople client and site id.
The following snippet below should go in the <code>onCreate</code> method.</p>

<pre><code class="language-java">SupportMapFragment mapFragment = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map_fragment));
// get the google maps object
mapFragment.getMapAsync(new OnMapReadyCallback() {
           @Override
           public void onMapReady(GoogleMap googleMap) {
               this.googleMap = googleMap;
           }
       });
//creating the MapControl Object
myMapControl = new MapControl(getApplicationContext(), fragment);
//init the map with the solution id and the venue id
myMapControl.initMap(&quot;YOUR_SOLUTION_ID&quot;, &quot;rtx&quot;);
// set the OnDataReadyListener to the current activity then we will override all the required methods
myMapControl.setOnDataReadyListener(this);
</code></pre>

<h2 id="using-the-ondatareadylistener">Using the OnDataReadyListener</h2>

<p>Your activity should implement the <code>OnDataReadyListener</code> class then overriding all the abstract methods below:</p>

<pre><code class="language-java">  @Override
   public void onLocationDataReady() {
   }

   @Override
   public void onAppDataReady() {

   }

   @Override
   public void onVenueDataReady(VenueCollection venueCollection) {

   }

   @Override
   public void onSolutionDataReady(Solution solution) {

   }

   @Override
   public void onCategoryDataReady(CategoryCollection categoryCollection) {

   }

   @Override
   public void onPushMessageDataReady(PushMessageCollection pushMessageCollection) {

   }

   @Override
   public void onAppConfigDataReady(AppConfig appConfig) {

   }
</code></pre>

<p>You should be aware if you want to deal with UI objects or using a method that do so inside the callbacks, you need to run it on the UIThread like this way :</p>

<pre><code class="language-java">  @Override
  public void onLocationsReady(final List&lt;Location&gt; locations) {
     runOnUiThread(new Runnable() {
        @Override
        public void run()
        {  // After querying POIs, the code below will show a route between the 2 first locations so we need to do it in the UIThread because both of the setMapPosition and the route methods uses UI objects
           mapControl.setRoutingProvider(new MPRoutingProvider());
           mapControl.setMapPosition(locations.get(0).getPoint(), 17f, false);
           mapControl.route(locations.get(0), locations.get(1), TravelMode.TRAVEL_MODE_WALKING, null, null, null);
        }
     });
  }
</code></pre>

<h2 id="using-map-icon-display-rules">Using Map Icon Display Rules</h2>

<p>To add your own icons for locations (point-of-interest, rooms, etc.), setup display rule(s) and add to the MapControl object:
Display rules are based on POI/location types. A typeset is defined/used in the MapsIndoors CMS. The current list of types can be listed by calling the MapsIndoors API via this URL:
<code>http://v2.mapsindoors.net/api/solutions/details/[your-client-id]/</code>
One of these types could be of name “Parking”, which indicates that this type is used for parking lots. Try adding the following snip of code into the <code>setUpMapIfNeeded()</code> method:</p>

<pre><code class="language-java">displayRules = new LocationDisplayRules();
displayRules.add(new LocationDisplayRule(&quot;Parking&quot;, R.drawable.parking, 17f, false));
mMapControl.addDisplayRules(displayRules);
</code></pre>

<p>Here we made a new locationDisplay rule container, then added a single rule to it saying we want the app to show a parking icon on all locations of type “parking” when the zoom level is larger than 17.
To show locations that should not have an icon just use null instead, for example:
displayRules.add(new LocationDisplayRule(&ldquo;poi&rdquo;, null, 19f, false));</p>

<h2 id="getting-a-marker-from-a-location-and-vice-versa">Getting a Marker from a Location and vice versa</h2>

<p>If a location is currently displayed on a map, the marker can be retrieved using :</p>

<pre><code class="language-java">location.getMarker();
</code></pre>

<p>Opposite, get a location from a marker using getLocation:</p>

<pre><code class="language-java">myMapControl.getLocation(marker);
</code></pre>

<h2 id="handling-marker-selections-and-other-user-events">Handling marker selections and other user events</h2>

<p>Detecting the user tapping a marker or an infowindow is part of the Google Maps Android API. Let your fragment or activity implement OnMarkerClickedListener and OnInfoWindowClickListener overriding the methods:</p>

<pre><code class="language-java">@Override
public boolean onMarkerClick(Marker marker) {
   return false; //return true if you don't want the marker centered (default Google Maps API behavior)
}

@Override
public void onInfoWindowClick(Marker marker) {
   Location l = mapControl.getLocation(marker);
}
</code></pre>

<p>NB: For the MapsIndoors SDK to function properly, MapControl will subscribe to the following Google Maps event listeners:</p>

<ul>
<li>OnCameraChangeListener</li>
<li>OnMarkerClickListener</li>
<li>OnMapClickListener</li>
<li>OnMapLoadedCallback</li>
</ul>

<p>If you need to hook up these events, please use the methods below, instead of calling the methods on the Google Maps object itself.</p>

<ul>
<li>myMapControl.setOnCameraChangeListener(myListener);</li>
<li>myMapControl.setOnMarkerClickListener(myListener);</li>
<li>myMapControl.setOnMapClickListener(myListener);</li>
<li>myMapControl.setOnMapLoadedCallback(myListener);</li>
</ul>

<p>By default, if the user taps on a marker, an infosnippet will appear in the bottom of the map. Subscribe for the events using OnSnippetTappedListener:</p>

<pre><code class="language-java">myMapControl.addOnSnippetTappedListener(
   new OnSnippetTappedListener() {
      @Override
      public void onSnippetTapped(int tapPosition, Location location) {
      if (tapPosition == InfoSnippetView.POSITION_CENTER) {
         // User tapped in the center of the info snippet
      }
      if (tapPosition == InfoSnippetView.POSITION_RIGHT) {
         // User tapped on the right side of the info snippet
      }
   }
}
);
</code></pre>


			<aside class="copyright" role="note">
				
				&copy; 2017 MapsIndoors (c)2017 &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="https://mapsindoors.github.io/firststeps/" title="MapsIndoors First Steps">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              MapsIndoors First Steps
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="https://mapsindoors.github.io/android/guide-part2/" title="MapsIndoors for Android - Part 2">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              MapsIndoors for Android - Part 2
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'https:\/\/mapsindoors.github.io\/';
      var repo_id  = 'MapsIndoors\/';
    
    </script>

    <script src="https://mapsindoors.github.io/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    
      <script>
        (function(i,s,o,g,r,a,m){
          i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||
          []).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;
          m.parentNode.insertBefore(a,m)
        })(window, document,
          'script', '//www.google-analytics.com/analytics.js', 'ga');
         
        ga('create', 'UA-63919776-1', 'auto');
        ga('set', 'anonymizeIp', true);
        ga('send', 'pageview');
         
        var buttons = document.querySelectorAll('a');
        Array.prototype.map.call(buttons, function(item) {
          if (item.host != document.location.host) {
            item.addEventListener('click', function() {
              var action = item.getAttribute('data-action') || 'follow';
              ga('send', 'event', 'outbound', action, item.href);
            });
          }
        });
         
        var query = document.querySelector('.query');
        query.addEventListener('blur', function() {
          if (this.value) {
            var path = document.location.pathname;
            ga('send', 'pageview', path + '?q=' + this.value);
          }
        });
      </script>
    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

